name: 'Package Upload'
description: 'Uploads a package to Chassy Index'
author: 'Chassy'

inputs:
  artifact:
    description: 'The path to the artifact to Upload'
    required: true
  type:
    description: 'The of artifact we want to upload. Eg: CONTAINER, FILE, ARCHIVE, RFSIMAGE, FIRMWARE'
    required: true
  architecture:
    description: 'The target chipset architecture, eg: AMD64, ARM64'
    required: false
  osID:
    description: 'the OS this targets, ie Ubuntu, ThreadX'
    required: false
  osVersion:
    description: 'the version of OS, ie 22.04'
    required: false
  # note: may have to add api base url or chassy token here, but we will ignore that until req'd    

  outputs:
    status:
      description: 'A log/status message denoting the success of the upload'

runs:
  using: 'docker'
  image: 'Dockerfile'
  env:
    GITHUB_OUTPUT: ${{ env.GITHUB_OUTPUT }}
  args:
    - pkg_upload
    - ${{ inputs.artifact }}
    - ${{ inputs.type }}
    - ${{ inputs.architecture }}
    - ${{ inputs.osID }}
    - ${{ inputs.osVersion }}

  # steps:
  #   - name: Install Python
  #     uses: actions/setup-python@v4
  #     with:
  #       python-version: '3.16'  
  #   - name: Install Dependencies
  #     run: pip install -r requirements.txt
  #     shell: bash
  #   - name: Pass Inputs to Shell
  #     run: |
  #             echo "INPUT_NUM=${{ inputs.num }}" >> $GITHUB_ENV
  #     shell: bash
  #   - name: Fetch the number's square
  #     id: get-square
  #     run: python src/get_num_square.py
  #     shell: bash